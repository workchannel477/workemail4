<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Admin Control Panel</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://cdn.jsdelivr.net/npm/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@tabler/icons-webfont@latest/dist/tabler-icons.min.css">
  </head>
  <body class="bg-gray-50 min-h-screen">
    <div class="max-w-7xl mx-auto px-4 py-10" x-data="adminApp()" x-init="init()">
      <header class="mb-8 flex flex-col md:flex-row md:items-center md:justify-between gap-4">
        <div>
          <h1 class="text-3xl font-bold text-gray-800">Admin Control Panel</h1>
          <p class="text-gray-600">Complete user management, IP rotation, and email system control</p>
        </div>
        <div class="flex gap-3">
          <button @click="redirectHome" class="inline-flex items-center gap-2 rounded-lg border border-gray-300 px-4 py-2 text-sm text-gray-700 hover:border-indigo-400 hover:text-indigo-600">
            <i class="ti ti-home"></i> Home
          </button>
          <button @click="openUserPanel" class="inline-flex items-center gap-2 rounded-lg border border-indigo-300 px-4 py-2 text-sm text-indigo-600 hover:bg-indigo-50">
            <i class="ti ti-user"></i> User Panel
          </button>
        </div>
      </header>

      <!-- Loading State -->
      <template x-if="!isReady">
        <div class="flex items-center justify-center py-20">
          <div class="text-center">
            <div class="inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-indigo-500"></div>
            <p class="mt-4 text-gray-600">Loading admin panel...</p>
          </div>
        </div>
      </template>

      <!-- Login Form -->
      <template x-if="isReady && !token">
        <section class="bg-white rounded-xl shadow-lg p-8 w-full max-w-lg mx-auto">
          <div class="text-center mb-6">
            <i class="ti ti-shield-lock text-5xl text-indigo-500 mb-4"></i>
            <h2 class="text-2xl font-semibold text-gray-800">Admin Login</h2>
            <p class="text-gray-500 mt-2">Sign in with administrator credentials</p>
          </div>
          <form class="space-y-5" @submit.prevent="login">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
              <input type="text" x-model.trim="loginForm.username" 
                     class="w-full rounded-lg border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                     placeholder="Enter admin username" required />
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
              <input type="password" x-model.trim="loginForm.password" 
                     class="w-full rounded-lg border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent"
                     placeholder="Enter password" required />
            </div>
            <button type="submit" class="w-full bg-indigo-600 hover:bg-indigo-700 text-white font-medium py-3 rounded-lg transition duration-200" 
                    :disabled="busy">
              <span x-show="!busy" class="inline-flex items-center justify-center gap-2">
                <i class="ti ti-login"></i> Sign In
              </span>
              <span x-show="busy" class="inline-flex items-center justify-center gap-2">
                <i class="ti ti-loader animate-spin"></i> Authenticating...
              </span>
            </button>
            <p class="text-sm text-red-600 text-center" x-show="error" x-text="error"></p>
          </form>
        </section>
      </template>

      <!-- Main Admin Dashboard -->
      <template x-if="isReady && token">
        <div class="space-y-8">
          <!-- Header Stats -->
          <section class="bg-white shadow rounded-xl p-6">
            <div class="flex flex-col md:flex-row md:items-center md:justify-between gap-6">
              <div>
                <div class="flex items-center gap-3 mb-2">
                  <i class="ti ti-user-cog text-2xl text-indigo-500"></i>
                  <h2 class="text-xl font-semibold text-gray-800">Admin Dashboard</h2>
                </div>
                <p class="text-gray-600">Signed in as <span class="font-semibold" x-text="user?.username"></span> 
                  • Role: <span class="capitalize font-semibold" x-text="user?.role"></span></p>
              </div>
              <div class="flex gap-3 flex-wrap">
                <button @click="fetchOverview" 
                        class="inline-flex items-center gap-2 px-4 py-2 bg-indigo-50 text-indigo-600 rounded-lg hover:bg-indigo-100"
                        :disabled="busy">
                  <i class="ti ti-refresh" :class="{ 'animate-spin': busy }"></i> Refresh
                </button>
                <button @click="logout" 
                        class="inline-flex items-center gap-2 px-4 py-2 bg-red-50 text-red-600 rounded-lg hover:bg-red-100">
                  <i class="ti ti-logout"></i> Logout
                </button>
              </div>
            </div>

            <!-- Stats Grid -->
            <div class="grid grid-cols-2 md:grid-cols-4 gap-4 mt-6">
              <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-gray-500">Total Users</p>
                    <p class="text-2xl font-bold text-gray-800" x-text="stats.totalUsers || 0"></p>
                  </div>
                  <i class="ti ti-users text-gray-400 text-xl"></i>
                </div>
              </div>
              <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-gray-500">Active Jobs</p>
                    <p class="text-2xl font-bold text-gray-800" x-text="stats.totalJobs || 0"></p>
                  </div>
                  <i class="ti ti-mail text-gray-400 text-xl"></i>
                </div>
              </div>
              <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-gray-500">IP Proxies</p>
                    <p class="text-2xl font-bold text-gray-800" x-text="stats.proxyCount || 0"></p>
                  </div>
                  <i class="ti ti-rotate-clockwise text-gray-400 text-xl"></i>
                </div>
              </div>
              <div class="bg-gray-50 rounded-lg p-4">
                <div class="flex items-center justify-between">
                  <div>
                    <p class="text-sm text-gray-500">Active Sessions</p>
                    <p class="text-2xl font-bold text-gray-800" x-text="stats.sessionCount || 0"></p>
                  </div>
                  <i class="ti ti-clock text-gray-400 text-xl"></i>
                </div>
              </div>
            </div>
          </section>

          <!-- User Management -->
          <section class="bg-white shadow rounded-xl p-6">
            <div class="flex items-center justify-between mb-6">
              <div class="flex items-center gap-3">
                <i class="ti ti-users text-2xl text-indigo-500"></i>
                <h2 class="text-xl font-semibold text-gray-800">User Management</h2>
              </div>
              <button @click="showAddUserModal = true"
                      class="inline-flex items-center gap-2 px-4 py-2 bg-green-500 text-white rounded-lg hover:bg-green-600">
                <i class="ti ti-plus"></i> Add User
              </button>
            </div>

            <!-- User Table -->
            <div class="overflow-x-auto rounded-lg border border-gray-200">
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Username</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Role</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Mailboxes</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Created</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                  <template x-for="user in overview.users" :key="user.id">
                    <tr class="hover:bg-gray-50">
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <i class="ti ti-user mr-3 text-gray-400"></i>
                          <span class="font-medium text-gray-900" x-text="user.username"></span>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium"
                              :class="user.role === 'admin' ? 'bg-purple-100 text-purple-800' : 'bg-blue-100 text-blue-800'">
                          <span x-text="user.role"></span>
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium"
                              :class="user.status === 'active' ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'">
                          <i class="ti ti-circle-filled text-xs mr-1"></i>
                          <span x-text="user.status"></span>
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="text-gray-900" x-text="user.mailboxes?.length || 0"></span>
                        <span class="text-gray-500 text-sm ml-1">mailboxes</span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-gray-500" x-text="formatDate(user.createdAt)"></td>
                      <td class="px-6 py-4 whitespace-nowrap text-sm font-medium">
                        <div class="flex gap-2">
                          <button @click="editUser(user)"
                                  class="text-indigo-600 hover:text-indigo-900">
                            <i class="ti ti-edit"></i>
                          </button>
                          <button @click="showChangePasswordModal(user)"
                                  class="text-blue-600 hover:text-blue-900">
                            <i class="ti ti-key"></i>
                          </button>
                          <button @click="deleteUser(user.id)"
                                  class="text-red-600 hover:text-red-900">
                            <i class="ti ti-trash"></i>
                          </button>
                        </div>
                      </td>
                    </tr>
                  </template>
                </tbody>
              </table>
            </div>
            <template x-if="!overview.users.length">
              <div class="text-center py-12">
                <i class="ti ti-users-off text-4xl text-gray-300 mb-4"></i>
                <p class="text-gray-500">No users found</p>
              </div>
            </template>
          </section>

          <!-- IP Rotation Management -->
          <section class="bg-white shadow rounded-xl p-6">
            <div class="flex items-center justify-between mb-6">
              <div class="flex items-center gap-3">
                <i class="ti ti-rotate-clockwise text-2xl text-indigo-500"></i>
                <h2 class="text-xl font-semibold text-gray-800">IP Rotation Configuration</h2>
              </div>
            </div>

            <div class="mb-6">
              <label class="block text-sm font-medium text-gray-700 mb-3">Proxy List (One per line)</label>
              <textarea x-model="ipForm.proxies" rows="6"
                        class="w-full rounded-lg border border-gray-300 px-4 py-3 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent font-mono text-sm"
                        placeholder="http://user:pass@host:port
socks5://host:port
http://host:port"></textarea>
              <p class="mt-2 text-sm text-gray-500">Enter one proxy per line in format: protocol://[user:pass@]host:port</p>
            </div>

            <div class="flex gap-3">
              <button @click="updateIPRotation"
                      class="inline-flex items-center gap-2 px-5 py-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700">
                <i class="ti ti-device-floppy"></i> Save Proxies
              </button>
              <button @click="loadIPRotation"
                      class="inline-flex items-center gap-2 px-5 py-2.5 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200">
                <i class="ti ti-refresh"></i> Load Current
              </button>
            </div>

            <div class="mt-6 p-4 bg-gray-50 rounded-lg">
              <div class="flex items-center gap-3 mb-3">
                <i class="ti ti-info-circle text-blue-500"></i>
                <h3 class="font-medium text-gray-700">Current Rotation Status</h3>
              </div>
              <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                <div>
                  <p class="text-sm text-gray-600">Total Proxies:</p>
                  <p class="font-semibold" x-text="ipRotation.proxies?.length || 0"></p>
                </div>
                <div>
                  <p class="text-sm text-gray-600">Current Index:</p>
                  <p class="font-semibold" x-text="ipRotation.currentIndex || 0"></p>
                </div>
              </div>
            </div>
          </section>

          <!-- Rate Limit Management -->
          <section class="bg-white shadow rounded-xl p-6">
            <div class="flex items-center justify-between mb-6">
              <div class="flex items-center gap-3">
                <i class="ti ti-speedboat text-2xl text-indigo-500"></i>
                <h2 class="text-xl font-semibold text-gray-800">Rate Limit Management</h2>
              </div>
              <button @click="resetAllRateLimits"
                      class="inline-flex items-center gap-2 px-4 py-2 bg-red-100 text-red-600 rounded-lg hover:bg-red-200">
                <i class="ti ti-eraser"></i> Reset All Limits
              </button>
            </div>

            <div class="overflow-x-auto rounded-lg border border-gray-200">
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Username</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Email Count (Last Minute)</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                  <template x-for="[username, timestamps] in Object.entries(rateLimits.limits || {})" :key="username">
                    <tr class="hover:bg-gray-50">
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex items-center">
                          <i class="ti ti-user mr-3 text-gray-400"></i>
                          <span class="font-medium text-gray-900" x-text="username"></span>
                        </div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium"
                              :class="timestamps.length > 5 ? 'bg-red-100 text-red-800' : 'bg-green-100 text-green-800'">
                          <i class="ti ti-mail mr-1"></i>
                          <span x-text="timestamps.length"></span>
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <button @click="resetUserRateLimit(username)"
                                class="inline-flex items-center gap-2 px-3 py-1 text-sm bg-blue-100 text-blue-600 rounded hover:bg-blue-200">
                          <i class="ti ti-eraser"></i> Reset
                        </button>
                      </td>
                    </tr>
                  </template>
                </tbody>
              </table>
            </div>
            <template x-if="!Object.keys(rateLimits.limits || {}).length">
              <div class="text-center py-12">
                <i class="ti ti-chart-line text-4xl text-gray-300 mb-4"></i>
                <p class="text-gray-500">No rate limit data available</p>
              </div>
            </template>
          </section>

          <!-- Jobs Overview -->
          <section class="bg-white shadow rounded-xl p-6">
            <div class="flex items-center justify-between mb-6">
              <div class="flex items-center gap-3">
                <i class="ti ti-mail text-2xl text-indigo-500"></i>
                <h2 class="text-xl font-semibold text-gray-800">Email Jobs Overview</h2>
              </div>
            </div>

            <div class="mb-6 flex gap-3">
              <button @click="activeTab = 'all'" 
                      :class="activeTab === 'all' ? 'bg-indigo-600 text-white' : 'bg-gray-100 text-gray-700'"
                      class="px-4 py-2 rounded-lg">All Jobs</button>
              <button @click="activeTab = 'pending'"
                      :class="activeTab === 'pending' ? 'bg-yellow-600 text-white' : 'bg-gray-100 text-gray-700'"
                      class="px-4 py-2 rounded-lg">Pending</button>
              <button @click="activeTab = 'sent'"
                      :class="activeTab === 'sent' ? 'bg-green-600 text-white' : 'bg-gray-100 text-gray-700'"
                      class="px-4 py-2 rounded-lg">Sent</button>
              <button @click="activeTab = 'failed'"
                      :class="activeTab === 'failed' ? 'bg-red-600 text-white' : 'bg-gray-100 text-gray-700'"
                      class="px-4 py-2 rounded-lg">Failed</button>
            </div>

            <div class="overflow-x-auto rounded-lg border border-gray-200">
              <table class="min-w-full divide-y divide-gray-200">
                <thead class="bg-gray-50">
                  <tr>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Subject</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Owner</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Recipients</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Last Sent</th>
                    <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th>
                  </tr>
                </thead>
                <tbody class="bg-white divide-y divide-gray-200">
                  <template x-for="job in filteredJobs" :key="job.id">
                    <tr class="hover:bg-gray-50">
                      <td class="px-6 py-4">
                        <div class="max-w-xs truncate" x-text="job.subject"></div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap" x-text="job.owner"></td>
                      <td class="px-6 py-4">
                        <div class="max-w-xs truncate" x-text="job.recipients.join(', ')"></div>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <span class="inline-flex items-center px-3 py-1 rounded-full text-sm font-medium"
                              :class="{
                                'bg-green-100 text-green-800': job.status === 'sent',
                                'bg-yellow-100 text-yellow-800': job.status === 'pending',
                                'bg-red-100 text-red-800': job.status === 'failed',
                                'bg-blue-100 text-blue-800': job.status === 'sending'
                              }">
                          <i class="ti ti-circle-filled text-xs mr-1"></i>
                          <span x-text="job.status"></span>
                        </span>
                      </td>
                      <td class="px-6 py-4 whitespace-nowrap text-gray-500" x-text="formatDate(job.lastSentAt)"></td>
                      <td class="px-6 py-4 whitespace-nowrap">
                        <div class="flex gap-2">
                          <button @click="sendJob(job.id)"
                                  :disabled="job.status === 'sending'"
                                  class="inline-flex items-center gap-1 px-3 py-1 text-sm bg-green-100 text-green-600 rounded hover:bg-green-200"
                                  :class="{ 'opacity-50 cursor-not-allowed': job.status === 'sending' }">
                            <i class="ti ti-send"></i> Send
                          </button>
                          <button @click="deleteJob(job.id)"
                                  class="inline-flex items-center gap-1 px-3 py-1 text-sm bg-red-100 text-red-600 rounded hover:bg-red-200">
                            <i class="ti ti-trash"></i>
                          </button>
                        </div>
                      </td>
                    </tr>
                  </template>
                </tbody>
              </table>
            </div>
          </section>
        </div>
      </template>

      <!-- Add User Modal -->
      <div x-show="showAddUserModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-xl bg-white">
          <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-semibold text-gray-800">Add New User</h3>
            <button @click="showAddUserModal = false" class="text-gray-400 hover:text-gray-600">
              <i class="ti ti-x text-xl"></i>
            </button>
          </div>
          <form @submit.prevent="createUser" class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
              <input type="text" x-model="newUser.username" required
                     class="w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Password</label>
              <input type="password" x-model="newUser.password" required
                     class="w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
              <select x-model="newUser.role"
                      class="w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <option value="user">User</option>
                <option value="admin">Admin</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
              <select x-model="newUser.status"
                      class="w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <option value="active">Active</option>
                <option value="suspended">Suspended</option>
              </select>
            </div>
            <div class="flex gap-3 pt-4">
              <button type="submit" class="flex-1 bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700">
                Create User
              </button>
              <button type="button" @click="showAddUserModal = false" 
                      class="flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300">
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Change Password Modal -->
      <div x-show="showChangePasswordModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-xl bg-white">
          <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-semibold text-gray-800">Change Password</h3>
            <button @click="showChangePasswordModal = false" class="text-gray-400 hover:text-gray-600">
              <i class="ti ti-x text-xl"></i>
            </button>
          </div>
          <div class="mb-4">
            <p class="text-gray-600">User: <span class="font-semibold" x-text="selectedUser?.username"></span></p>
          </div>
          <form @submit.prevent="changeUserPassword" class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">New Password</label>
              <input type="password" x-model="passwordForm.newPassword" required
                     class="w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
            <div class="flex gap-3 pt-4">
              <button type="submit" class="flex-1 bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700">
                Update Password
              </button>
              <button type="button" @click="showChangePasswordModal = false" 
                      class="flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300">
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>

      <!-- Edit User Modal -->
      <div x-show="showEditUserModal" class="fixed inset-0 bg-gray-600 bg-opacity-50 overflow-y-auto h-full w-full z-50">
        <div class="relative top-20 mx-auto p-5 border w-full max-w-md shadow-lg rounded-xl bg-white">
          <div class="flex justify-between items-center mb-6">
            <h3 class="text-xl font-semibold text-gray-800">Edit User</h3>
            <button @click="showEditUserModal = false" class="text-gray-400 hover:text-gray-600">
              <i class="ti ti-x text-xl"></i>
            </button>
          </div>
          <form @submit.prevent="updateUser" class="space-y-4">
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Username</label>
              <input type="text" x-model="editUserForm.username" required
                     class="w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Role</label>
              <select x-model="editUserForm.role"
                      class="w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <option value="user">User</option>
                <option value="admin">Admin</option>
              </select>
            </div>
            <div>
              <label class="block text-sm font-medium text-gray-700 mb-2">Status</label>
              <select x-model="editUserForm.status"
                      class="w-full rounded-lg border border-gray-300 px-4 py-2 focus:outline-none focus:ring-2 focus:ring-indigo-500">
                <option value="active">Active</option>
                <option value="suspended">Suspended</option>
              </select>
            </div>
            <div class="flex gap-3 pt-4">
              <button type="submit" class="flex-1 bg-indigo-600 text-white py-2 rounded-lg hover:bg-indigo-700">
                Update User
              </button>
              <button type="button" @click="showEditUserModal = false" 
                      class="flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg hover:bg-gray-300">
                Cancel
              </button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <script src="/admin.js"></script>
  </body>
</html>